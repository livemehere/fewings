import{j as t}from"./jsx-runtime-CLpGMVip.js";import{c as j,u,J as y}from"./index-0-iVU5nl.js";import{r as h}from"./index-BAAwwy_G.js";import{r as g}from"./index-Cd0j_pUr.js";import"./index-aiH20kqd.js";var m=j({items:[],setItems:()=>{},idRef:{current:0}});function C(){let s=u(m,e=>e.setItems),l=u(m,e=>e.idRef),i=e=>{s(n=>n.filter(a=>a.id!==e))};return{open:(e,n)=>new Promise((a,p)=>{let r=l.current++,c={id:r,render:e,options:n,resolve:o=>{i(r),a(o)},reject:o=>{i(r),p(o)}};s(o=>[...o,c])}),closeAll:()=>{s([])}}}function O({children:s,containerStyle:l,containerClassName:i}){let[e,n]=h.useState([]),a=h.useRef(0),p=r=>{var c;if(!r.target.closest("[data-overlay-content]")){let o=e[e.length-1];(c=o==null?void 0:o.options)!=null&&c.closeOnClickOutside&&o.reject("clickOutside")}};return t.jsxs(m.Provider,{value:{items:e,setItems:n,idRef:a},children:[e.length>0&&g.createPortal(t.jsx("div",{"data-overlay-container":!0,onClick:p,style:{position:"fixed",inset:0,zIndex:9999,background:"#08090ACC",...l},className:i,children:e.map(r=>t.jsx("div",{"data-overlay-content":!0,style:{width:0,height:0},children:r.render({resolve:r.resolve,reject:r.reject})},r.id))}),document.body),s]})}const A={title:"react/overlay",parameters:{layout:"centered",docs:{description:{component:"handle component lifecycle like `Promise`."}}},tags:["autodocs"]},k=()=>{const{open:s}=C(),l=async()=>{const i=await s(({resolve:e,reject:n})=>t.jsxs("div",{style:{background:"white",width:500,height:300,position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%)",textAlign:"center"},children:[t.jsx("h1",{children:"Modal"}),t.jsx("p",{children:"Name: John Doe"}),t.jsx("p",{children:"Age: 30"}),t.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"20px",justifyContent:"center"},children:[t.jsx("button",{onClick:()=>e("Success!"),children:"Confirm"}),t.jsx("button",{onClick:()=>n("Cancel"),children:"Close"})]})]}),{closeOnClickOutside:!0});console.log("Result:",i)};return t.jsx("div",{style:{padding:"20px"},children:t.jsx(y,{onClick:l,style:{width:150,height:60,padding:12,cursor:"pointer"},children:"Click to Open Modal"})})},d={render:()=>t.jsx(O,{children:t.jsx(k,{})})};var x,f,v;d.parameters={...d.parameters,docs:{...(x=d.parameters)==null?void 0:x.docs,source:{originalSource:`{
  render: () => <OverlayProvider>
      <OverlayExample />
    </OverlayProvider>
}`,...(v=(f=d.parameters)==null?void 0:f.docs)==null?void 0:v.source}}};const S=["Default"];export{d as Default,S as __namedExportsOrder,A as default};
